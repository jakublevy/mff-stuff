declare @od date;
	declare @do date;
	declare @reg_id nvarchar(7);
	declare @kontrakt_id nvarchar(15);
	declare @id nvarchar(15);
	declare POINTER_VH cursor for select Kontrakt_Id, Od, Do, Hráč_Reg_Id from inserted;
	open POINTER_VH;

	fetch next from POINTER_VH into @id, @od, @do, @reg_id;
	while @@FETCH_STATUS = 0
	begin																					      --neprázdný průnik
		select top 1 @kontrakt_id = Kontrakt_Id from Hostování where Hráč_Reg_Id = @reg_id and @id <> Kontrakt_Id and Od <= @do and Do >= @od
		if @kontrakt_id is not null
		begin
			raiserror('Dvě hostování mají neprázdný průnik', 15, 15)
			rollback;
		end


		set @kontrakt_id = null;
		fetch next from POINTER_VH into @id, @od, @do, @reg_id;
	end
	close POINTER_VH;
	deallocate POINTER_VH;




Predelat nasledujici procedury
	- Smaž_Nevyužité_Kontakty
	- Smaž_Nevyžité_Adresy
	- Přidej_Utkání
	- Koupit_Hráče
	- Hráči_Podle_Kategorie

Predelat triggery
	- prvni asi hotovy, checknout, smazat blbosti


with h as (
		select Kontrakt_Id,Od,Do from inserted 
		union all
		select Kontrakt_Id,Od,Do from Hostování
	)
	select * from h h1
	cross apply (
		select * from h h2
		where h1.Kontrakt_Id <> h2.Kontrakt_Id
	) h2
	where h1.Od <= h2.Do and h1.Do >= h2.Od



Funkce
	- OK vsechny


utkani
	Skore
	Souper Nazev klubu
	Doma / Venku
	Adresa Konani
	Ml. kategorie formatovane
	sezona start
	sezona konec
	standardni informace o rozhodcim (jmeno, prijmeni, email, telefon)
	soupiska (x/y kde x je pocet hracu v zakladu a y je pocet hracu na stridani)
	


	


declare @id int;
exec Přidej_Utkání 5, 3, 2, 2, 1, 1002, 'Starší přípravka', @goly_my_polocas = 2, @goly_souper_polocas = 2, @ml_kategorie_muzi = 0, @utkani_id = @id output;
print @id;


declare @s date;
exec Aktuální_Sezóna @ss output;
print @s;


Pridavani zapasu je nejake zkuvervene
	sezona nethrowuje

Přidání zápasu
	- zjistit pohlaví mládežnické skupiny 
	- implicitně použít sezónu, která aktuálně je - done

Mladší dorost
Mladší dorostenky
Mladší žáci
Mladší žákyně
Muži
Starší dorost
Starší dorostenky
Starší žáci
Starší žákyně
Ženy

create Ml_Kategorie_Pohlaví

Hráč_Soupiska
0375453	1002	2	False
0512714	1002	1	False
0547328	1002	3	False
0593646	1002	4	False
1668407	1002	5	False
2128924	1002	6	False
3667817	1002	7	False
4327669	1002	8	False
4337353	1002	9	False
4371618	1002	10	False
5684462	1002	11	False
6248474	1002	12	True
6316624	1002	13	True
6323551	1002	14	True
7879593	1002	15	True
8038302	1002	16	True
8155190	1002	17	True
8763292	1002	18	True

Utkání
1	5	3	NULL	NULL	2	2	Starší přípravka	True	2015-11-11	2	1002



kontakt muze byt vyuzit
	- hrac
	- klub
	- soupiska
	- rozhodci